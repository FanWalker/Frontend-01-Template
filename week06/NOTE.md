## 有限状态机处理字符串
每一个状态都是一个机器，每个机器可以做计算、存储、输出...；所有的机器接受的输入都是一致的；每个机器本身没有状态，用函数表示的话，应该是纯函数

每一个机器都知道下一个状态：每个机器都有确定的下一个状态（Moore）；每个机器根据输入决定下一个状态（Mealy）

使用状态机（Mealy）

	// 每个函数是一个状态
	function state(input) // 函数参数就是输入
	{
		// 在函数中，可以自由地编写代码，处理每个状态的逻辑
		return next; // 返回值作为下一个状态
	}

	// 以下是调用
	while(input) {
		// 获取输入
		state = state(input); // 把状态机的返回值作为下一个状态
	}

#### 解析body

第一步：拆分文件

把parser单独拆到文件中；parser接受html文本作为参数，返回一颗DOM树

第二步： 创建状态机

用有限状态机来实现HTML的分析；在HTML标准中已经规定HTML的状态；Toy-Browser只选择一部分状态完成一个最简版本

第三步：解析标签 

主要标签有： 开始标签、结束标签和自封闭标签，这一步暂时忽略属性

第四步：创建元素

除了状态迁移，还要加入业务逻辑，在标签结束状态提交标签token

第五步：处理属性

属性分为单引号、双引号、无引号三种写法，需要较多状态处理；处理属性的方式跟标签类似；属性结束时，把属性加到标签token上

第六步：构建DOM树

从标签构建DOM树使用栈；遇到开始标签时创建元素并入栈，遇到结束标签时出栈；自封闭节点可视为入栈后立刻出栈；任何元素的父元素
是它入栈前的栈顶

第七步：处理文本节点